"use strict";define("forum/topic/move",function(){var t={};var i;var o;t.init=function(i,o,a){t.tids=i;t.currentCid=o;t.onComplete=a;t.moveAll=!i;socket.emit("categories.getMoveCategories",e)};function e(o,e){if(o){return app.alertError(o.message)}a(e,function(){i.on("hidden.bs.modal",function(){i.remove()});i.find("#move-confirm").addClass("hide");if(t.moveAll||t.tids&&t.tids.length>1){i.find(".modal-header h3").translateText("[[topic:move_topics]]")}i.on("click",".category-list li[data-cid]",function(){r($(this))});i.find("#move_thread_commit").on("click",c);i.modal("show")})}function a(t,o){templates.parse("partials/move_thread_modal",{categories:[]},function(e){require(["translator"],function(a){a.translate(e,function(e){i=$(e);t.forEach(function(t){if(!t.link){n(i.find(".category-list"),t,"")}});o()})})})}function n(t,i,o){var e=$("<li/>");if(i.bgColor){e.css("background-color",i.bgColor)}if(i.color){e.css("color",i.color)}e.toggleClass("disabled",!!i.disabled);e.attr("data-cid",i.cid);e.attr("data-icon",i.icon);e.attr("data-name",i.name);e.html('<i class="fa fa-fw '+i.icon+'"></i> '+i.name);t.append(o);t.append(e);t.append("<br/>");var a="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";i.children.forEach(function(i){if(!i.link){n(t,i,a+o)}})}function r(t){i.find("#confirm-category-name").html(t.html());i.find("#move-confirm").removeClass("hide");o=t;i.find("#move_thread_commit").prop("disabled",false)}function c(){var t=i.find("#move_thread_commit");if(!t.prop("disabled")&&o.attr("data-cid")){t.prop("disabled",true);d()}}function d(){socket.emit(t.moveAll?"topics.moveAll":"topics.move",{tids:t.tids,cid:o.attr("data-cid"),currentCid:t.currentCid},function(e){i.modal("hide");if(e){return app.alertError(e.message)}app.alertSuccess("[[topic:topic_move_success, "+o.attr("data-name")+']] <i class="fa fa-fw '+o.attr("data-icon")+'"></i>');if(typeof t.onComplete==="function"){t.onComplete()}})}return t});
//# sourceMappingURL=public/src/client/topic/move.js.map